<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>入门指南 - JS ClawHub</title>
    <meta name="description" content="OpenClaw 入门指南 - 从零开始配置你的个人 AI 助手">
    <meta property="og:type" content="website">
    <meta property="og:title" content="入门指南 - JS ClawHub">
    <meta property="og:description" content="OpenClaw 入门指南 - 从零开始配置你的个人 AI 助手">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Space Grotesk', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: { brand: { yellow: '#FCD228', black: '#000000', white: '#FFFFFF' } },
                    boxShadow: { 'brutal': '4px 4px 0px 0px #000000', 'brutal-lg': '8px 8px 0px 0px #000000', 'brutal-hover': '2px 2px 0px 0px #000000', 'brutal-white': '4px 4px 0px 0px #FFFFFF' },
                    borderWidth: { '3': '3px' },
                    animation: { 'slide-up': 'slideUp 0.8s ease-out forwards' },
                    keyframes: { slideUp: { '0%': { opacity: '0', transform: 'translateY(40px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } } }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="../shared/css/brutal.css">
    <script src="../shared/js/i18n/index.js"></script>
    <script src="../shared/js/i18n/locales/zh-CN.js"></script>
    <script src="../shared/js/i18n/locales/en-US.js"></script>
    <script>if (typeof I18nManager !== 'undefined') I18nManager.init();</script>
</head>
<body class="min-h-screen font-sans selection:bg-black selection:text-brand-yellow overflow-x-hidden">
    <div id="canvas-container" class="fixed inset-0 -z-10 opacity-40 pointer-events-none"></div>
    <div id="nav-container"></div>
    <main class="pt-32 pb-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <section class="mb-12">
            <h1 class="brutal-section-title mb-6" data-i18n="guide.heroTitle">入门指南</h1>
            <p class="text-xl font-bold max-w-2xl border-l-4 border-black pl-6 bg-white/50 p-4" data-i18n-html="guide.heroDesc">
                从零开始配置你的 OpenClaw <span class="bg-black text-brand-yellow px-1">个人 AI 助手</span>。
            </p>
        </section>
        <div class="flex flex-col lg:flex-row gap-8">
            <aside class="lg:w-64 flex-shrink-0">
                <div class="lg:sticky lg:top-28">
                    <div class="brutal-card p-4">
                        <h3 class="font-bold uppercase text-sm mb-4 border-b-2 border-black pb-2" data-i18n="guide.toc">目录</h3>
                        <nav id="guide-nav" class="flex flex-col gap-1">
                            <div class="brutal-loading mx-auto"></div>
                        </nav>
                    </div>
                </div>
            </aside>
            <div class="flex-grow min-w-0">
                <div id="guide-content" class="brutal-card p-8 brutal-prose">
                    <div id="loading-state" class="text-center py-8">
                        <div class="brutal-loading mx-auto mb-4"></div>
                        <p class="font-mono font-bold" data-i18n="guide.loadingGuide">LOADING GUIDE...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <div id="footer-container"></div>
    <script src="../shared/js/threejs-bg.js"></script>
    <script src="../shared/js/nav.js"></script>
    <script src="../shared/js/footer.js"></script>
    <script>
    const GuidePage = {
        guides: [],
        currentSlug: null,
        _l(obj, field) {
            if (typeof I18nManager !== 'undefined') return I18nManager.getLocalizedField(obj, field);
            const val = obj[field]; return typeof val === 'string' ? val : (val && val['zh-CN']) || '';
        },
        _t(key) { return typeof I18nManager !== 'undefined' ? I18nManager.t(key) : key; },
        async init() {
            try {
                const response = await fetch('./data/index.json');
                if (!response.ok) throw new Error('Failed to load guide index');
                this.guides = await response.json();
                this.renderNav();
                const hash = window.location.hash.replace('#', '');
                const slug = hash || (this.guides.length > 0 ? this.guides[0].slug : null);
                if (slug) this.loadGuide(slug);
                window.addEventListener('hashchange', () => {
                    const h = window.location.hash.replace('#', '');
                    if (h && this.guides.some(g => g.slug === h)) this.loadGuide(h);
                });
                document.title = this._t('guide.pageTitle');
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading-state').innerHTML = '<p class="font-mono font-bold text-xl">' + this._t('guide.errorLoading') + '</p>';
            }
        },
        renderNav() {
            const nav = document.getElementById('guide-nav');
            if (!nav) return;
            nav.innerHTML = this.guides.map(guide =>
                '<a href="#' + guide.slug + '" class="guide-nav-item px-3 py-2 font-bold text-sm border-2 border-transparent hover:border-black hover:bg-brand-yellow transition-all no-underline text-black" data-slug="' + guide.slug + '" onclick="GuidePage.loadGuide(\'' + guide.slug + '\'); return false;">' + this.escapeHtml(this._l(guide, 'title')) + '</a>'
            ).join('');
        },
        async loadGuide(slug) {
            this.currentSlug = slug;
            window.location.hash = slug;
            document.querySelectorAll('.guide-nav-item').forEach(item => {
                if (item.dataset.slug === slug) { item.classList.add('border-black', 'bg-brand-yellow'); item.classList.remove('border-transparent'); }
                else { item.classList.remove('border-black', 'bg-brand-yellow'); item.classList.add('border-transparent'); }
            });
            const contentEl = document.getElementById('guide-content');
            const locale = typeof I18nManager !== 'undefined' ? I18nManager.getLocale() : 'zh-CN';
            let markdown = null;
            if (locale !== 'zh-CN') {
                try { const resp = await fetch('./data/' + slug + '.' + locale + '.md'); if (resp.ok) markdown = await resp.text(); } catch {}
            }
            if (!markdown) {
                try { const resp = await fetch('./data/' + slug + '.md'); if (resp.ok) markdown = await resp.text(); else throw new Error('not found'); } catch (e) { contentEl.innerHTML = '<p class="font-mono font-bold text-xl">' + this._t('guide.guideNotFound') + '</p>'; return; }
            }
            markdown = markdown.replace(/^---\s*\n[\s\S]*?\n---\s*\n/, '');
            if (typeof marked !== 'undefined') {
                marked.setOptions({ breaks: true, gfm: true });
                contentEl.innerHTML = marked.parse(markdown);
                if (typeof hljs !== 'undefined') contentEl.querySelectorAll('pre code').forEach(block => hljs.highlightElement(block));
            }
            const guide = this.guides.find(g => g.slug === slug);
            if (guide) document.title = this._l(guide, 'title') + (typeof I18nManager !== 'undefined' ? I18nManager.t('guide.detailTitleSuffix') : ' - 入门指南');
        },
        escapeHtml(str) { if (!str) return ''; const div = document.createElement('div'); div.textContent = str; return div.innerHTML; }
    };
    document.addEventListener('DOMContentLoaded', () => GuidePage.init());
    window.addEventListener('localechange', () => {
        document.title = I18nManager.t('guide.pageTitle');
        I18nManager.updateDOM();
        GuidePage.renderNav();
        if (GuidePage.currentSlug) GuidePage.loadGuide(GuidePage.currentSlug);
    });
    </script>
</body>
</html>
